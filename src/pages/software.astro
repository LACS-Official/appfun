---
import Layout from '../layouts/Layout.astro';
import SoftwareListByTags from '../components/software/SoftwareListByTags.astro';
import { initializeApiClient } from '../lib/api';
import { apiConfig } from '../lib/config';

// åˆå§‹åŒ– API å®¢æˆ·ç«¯
initializeApiClient(apiConfig);

const title = 'å…¨éƒ¨è½¯ä»¶';
const description = 'æµè§ˆAPPFUNä¸Šçš„æ‰€æœ‰å¯ç”¨è½¯ä»¶å·¥å…·ï¼ŒæŒ‰æ—¶é—´å€’åºæ’åˆ—ï¼Œå‘ç°æœ€æ–°æœ€çƒ­é—¨çš„è½¯ä»¶ã€‚åŒ…æ‹¬å·¥å…·è½¯ä»¶ã€å¼€å‘å·¥å…·ã€è®¾è®¡è½¯ä»¶ã€å¤šåª’ä½“è½¯ä»¶ç­‰å¤šç§åˆ†ç±»';
const keywords = 'è½¯ä»¶å¤§å…¨,è½¯ä»¶åˆ—è¡¨,æœ€æ–°è½¯ä»¶,çƒ­é—¨è½¯ä»¶,å…è´¹è½¯ä»¶,è½¯ä»¶ä¸‹è½½,APPFUN';
const canonical = 'https://appfun.fun/software';
const structuredData = {
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": title,
  "description": description,
  "url": canonical,
  "mainEntity": {
    "@type": "ItemList",
    "numberOfItems": 0,
    "itemListElement": []
  }
};
---

<Layout 
  title={title} 
  description={description} 
  keywords={keywords}
  canonical={canonical}
  structuredDataType="website"
  structuredData={structuredData}
>
  <!-- é¡µé¢å¤´éƒ¨ -->
  <section class="bg-gradient-to-r from-gray-600 to-gray-800 text-white py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <div class="flex justify-center mb-4">
          <div class="bg-white/20 p-4 rounded-full">
            <span class="text-4xl">ğŸ“¦</span>
          </div>
        </div>
        <h1 class="text-4xl font-bold mb-4">{title}</h1>
        <p class="text-xl text-gray-100 max-w-3xl mx-auto">
          {description}
        </p>
      </div>
    </div>
  </section>

  <!-- è½¯ä»¶åˆ—è¡¨ -->
  <section class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <SoftwareListByTags
        title="å…¨éƒ¨è½¯ä»¶"
        description="æŒ‰æ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°å‘å¸ƒçš„è½¯ä»¶åœ¨æœ€å‰é¢"
        tags=""
        limit={24}
        sortBy="updatedAt"
        sortOrder="desc"
        showViewAll={false}
        class="w-full"
      />
    </div>
  </section>
</Layout>

<script>
  import { initializeApiClient, getApiClient } from '../lib/api';
  import { apiConfig } from '../lib/config';

  // åˆå§‹åŒ– API å®¢æˆ·ç«¯
  initializeApiClient(apiConfig);

  // é¡µé¢åŠ è½½å®Œæˆåçš„å¤„ç†
  document.addEventListener('DOMContentLoaded', () => {
    console.log('å…¨éƒ¨è½¯ä»¶é¡µé¢å·²åŠ è½½');

    // è®¾ç½®å…¨å±€APIå®¢æˆ·ç«¯
    window.apiClient = getApiClient();
  });
</script>
